<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>   
<meta name="description" content="不超过150个字符"/>       
<meta name="keywords" content=""/>     
<title>小love容儿开放平台-应用中心</title>
<link rel="stylesheet" type="text/css" href="../layui/css/layui.css">
<link rel="stylesheet" type="text/css" href="../css/iconfont.css">
<link rel="stylesheet" type="text/css" href="../css/style/index.css">
<link rel="stylesheet" type="text/css" href="../css/prettify.css">
</head>
<body onload="prettyPrint()">
	<section class="page-index-top">
		<div class="page-container" style="overflow: visible;">
			<div class="page-header">
				<div class="logo"><img src="../images/logo_03.jpg" alt=""></div>
				<ul class="layui-nav">
					<li class="layui-nav-item"><a href="index.html">首页</a></li>
					<li class="layui-nav-item layui-this"><a href="#">应用中心</a></li>
					<li class="layui-nav-item"><a href="interface-api.html">API</a></li>
					<li class="layui-nav-item"><a href="document-center.html">文档中心</a></li>
					<li class="layui-nav-item"><a href="#">社区</a></li>
				</ul>
				<div class="page-index-login">
					<ul class="page-login-group">
						<li><a href="login.html">登录</a></li>
						<li><a href="register.html">注册</a></li>
						<li class="page-index-console"><a href="console.html">控制台</a></li>
					</ul>
				</div>
			</div>
		</div>
	</section>
	<div class="page-line"></div>
	<div class="page-interface-content">
		<div class="page-container">
			<div class="page-slide-subnav">
				<ul class="page-slide-group">
				  <li class="layui-nav-item subnav-this"><a href="#">应用管理</a></li>
				  <li class="layui-nav-item"><a href="#">IP白名单</a></li>
				</ul>
			</div>
			<div class="page-document-content">
				<div class="page-collapse-group">
				  <h1>
				  	  <span class="icon iconfont layui-icon-aliwxbpinpaibao"></span> 应用管理
				  	  <a class="layui-btn layui-btn-normal" href="application/add.html"><i class="icon iconfont layui-icon-aliadd"></i> 新增应用</a>
				  </h1>
				  <div class="application-top-search">
					<form class="layui-form">
				  	  <div class="layui-form-item">
					    <div class="layui-inline">
					      <label class="layui-form-label">应用名称</label>
					      <div class="layui-input-inline">
					        <input type="text" name="name" id="Application_name" autocomplete="off" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					        <label class="layui-form-label">状态</label>
						    <div class="layui-input-inline">
						      <select name="status" id="Application_status" lay-filter="status">
						        <option value="0">已创建</option>
						        <option value="1">待审核</option>
						        <option value="1">审核通过</option>
						      </select>
						    </div>
					    </div>
					    <div class="layui-inline">
					      <button class="layui-btn layui-btn-normal" id="search" data-type="search"><i class="icon iconfont layui-icon-alisearch"></i> 搜索</button>
					    </div>
					  </div>
					</form>
				  </div>
				  <div class="application-content-table">
					<table class="layui-table" lay-size="lg" id="LAY_table_document" lay-filter="LAY_table_document"> </table>
					<script type="text/html" id="LAY_table_action">
					  <a class="layui-btn layui-btn-xs" lay-event="data_detail">详情</a>
					  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="data_manage">接口管理</a>
					</script>
				  </div>	
				</div>
			</div>
		</div>
	</div>
	<footer class="page-index-footer tc">
		<div class="page-container">
			<ul class="page-index-link">
				<li><a href="#">关于平台</a></li>
				<li><a href="#">联系平台</a></li>
				<li><a href="#">人才招聘</a></li>
				<li><a href="#">平台服务</a></li>
				<li><a href="#">平台资讯</a></li>
				<li><a href="#">平台文化</a></li>
			</ul>
			<p class="page-copyright">Copyright © 2015-2021 小love容儿开放平台版权所有|豫ICP备66666号-2.</p>
		</div>
	</footer>

	<div class="detail" id="detail" style="display: none">
		<form class="layui-form" action="" lay-filter="formTest">
		  <div class="layui-form-item">
		    <label class="layui-form-label">姓名</label>
		    <div class="layui-input-block">
		      <input type="text" name="username" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">性别</label>
		    <div class="layui-input-inline">
		      <input type="text" name="sex" required lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input">
		    </div>
		    <div class="layui-form-mid layui-word-aux">辅助文字</div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">城市</label>
		    <div class="layui-input-block">
		      <select name="city" lay-verify="required">
		        <option value=""></option>
		        <option value="城市-0">城市-0</option>
		        <option value="城市-1">城市-1</option>
		        <option value="城市-2">城市-2</option>
		        <option value="城市-3">城市-3</option>
		        <option value="城市-4">城市-4</option>
		      </select>
		    </div>
		  </div>
		</form>
	</div>
</body>
<script type="text/javascript" src="http://cdn.staticfile.org/jquery/2.0.0/jquery.min.js"></script>
<script src="../layui/layui.js"></script>
<script src="../js/prettify.js"></script>
<script>
layui.use(['element', 'table', 'jquery', 'form'], function(){
    var element = layui.element,
    	table = layui.table, 
    	$ = layui.jquery,
    	form = layui.form;
  	    //方法级渲染
    table.render({
        elem: '#LAY_table_document',
        url: '', //接口地址
        data: [
	        {
	            "id":1,
	            "username":"user-0",
	            "sex":"女",
	            "city":"城市-0",
	            "sign":"签名-0",
	            "classify":"作家",
	            "score":57
	        },
	        {
	            "id":2,
	            "username":"user-2",
	            "sex":"女",
	            "city":"城市-1",
	            "sign":"签名-1",
	            "classify":"画家",
	            "score":59
	        }
        ],
        cols: [
	        [
	            { field:'username', title: '名称', sort: true },
	            { field:'sex', title: '性别', width:80, sort: true,edit:true},
	            { field:'city', title: '城市', width:180},
	            { field:'sign', title: '签名', width:100},
	            { field:'classify', title: '职业', width:100},
	            { field:'score', title: '分数', width:100},
	            {field:'right', title: '操作', width:177,toolbar:"#LAY_table_action"}
	        ]
        ],
        page: true,
        limit: 10,
        limits: [50, 40, 30, 20, 10],  
        // height: 600,
    });

    var $ = layui.$, active = {
        reload: function(){
        	const name = $('#Application_name').val();
            const status = $('#Application_status').val();
            table.reload('LAY_table_document', {
                where: {
                    'name': name,
                    'status': status,
                }, 
                page: {
                    curr: 1 //重新从第 1 页开始
                }
            });
        }
    };

    $('#search').on('click', function(){
        active.reload();
    });

    //监听工具条
    table.on('tool(LAY_table_document)', function(obj){
    	// console.log(obj.event)
        var data = obj.data;
        if(obj.event === 'data_detail'){
            layer.msg('id'+ data.id + ' 的详情');
            layer.open({
		        type: 1//（信息框，默认）
		        ,title: '当你选择该窗体时，即会在最顶端'
		        ,area: ['390px', '260px']
		        ,shade: [0.3, '#000']
		        ,content: $('#detail') //数组第二项即吸附元素选择器或者DOM
		        ,btn: ['继续弹出', '全部关闭'] //只是为了演示
		        ,yes: function(){
		        	
		        }
		        ,btn2: function(){
		        	layer.closeAll();
		        }
		        ,zIndex: layer.zIndex //重点1
		        ,success: function(layero){
		        	console.log(data)
		          form.val("formTest", {
					  "username": data.username	  
					  ,"sex": data.sex
					  ,"city": data.city
					  ,"check[write]": true
					  ,"open": false
					  ,"desc": "我爱layui"
				})
		      }
		  });
            // window.location.href="application/detail.html"
        } else if(obj.event === 'data_manage'){
            layer.msg('id'+ data.id + ' 的接口管理');
            window.location.href="application/interface.html"
        } 
    });



});
</script>
</html>